{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport { useState, useEffect } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport StatusBar from \"react-native-web/dist/exports/StatusBar\";\nimport ImageBackground from \"react-native-web/dist/exports/ImageBackground\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport TopBar from \"./components/TopBar\";\nimport AboutModal from \"./components/AboutModal\";\nimport Cards from \"./components/Cards\";\nimport CircularLoading from \"./components/CircularLoading\";\nimport ConnectText from \"./components/ConnectText\";\nimport EnvChart from \"./components/EnvChart\";\nimport ChartToggle from \"./components/ChartToggle\";\nimport URLField from \"./components/URLBar\";\nimport { colors0, colors1 } from \"./components/ComponentStyles\";\nimport utils from \"./services/WEUtils\";\nimport envmon from \"./services/envmon\";\nimport bgImage from \"./assets/background.jpg\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar style = StyleSheet.create({\n  container: {\n    flex: 1\n  },\n  webWrapper: {\n    flex: 1,\n    height: 720,\n    width: 480,\n    alignSelf: 'center'\n  },\n  bgImage: {\n    flex: 1\n  }\n});\n\nvar ShowCards = function ShowCards(_ref) {\n  var env = _ref.env;\n\n  if (env.length === 0 || env === undefined) {\n    return _jsx(CircularLoading, {});\n  } else {\n    return _jsx(Cards, {\n      temperature: env[0].envdata.temp,\n      humidity: env[0].envdata.humidity\n    });\n  }\n};\n\nvar WebEnv = function WebEnv() {\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      visible = _useState2[0],\n      setModalVisible = _useState2[1];\n\n  var _useState3 = useState(0),\n      _useState4 = _slicedToArray(_useState3, 2),\n      chartType = _useState4[0],\n      setChartType = _useState4[1];\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      env = _useState6[0],\n      setEnv = _useState6[1];\n\n  var _useState7 = useState({\n    labels: [-1],\n    data: [0.0]\n  }),\n      _useState8 = _slicedToArray(_useState7, 2),\n      chartData = _useState8[0],\n      setChartData = _useState8[1];\n\n  var _useState9 = useState('http://envmon.local:8888/'),\n      _useState10 = _slicedToArray(_useState9, 2),\n      URL = _useState10[0],\n      setURL = _useState10[1];\n\n  console.log(URL);\n  useEffect(function () {\n    utils.init(setURL);\n  }, []);\n  useEffect(function () {\n    setTimeout(function () {\n      envmon.getAll(URL).then(function (data) {\n        return setEnv(data);\n      });\n    }, 2000);\n  }, [env]);\n  useEffect(function () {\n    setEnv([]);\n  }, [URL]);\n  useEffect(function () {\n    if (env.length !== 0 && env !== undefined && !(isNaN(env[0].envdata.temp) || isNaN(env[0].envdata.humidity))) {\n      var newChart = chartData.labels[0] === -1 ? {\n        labels: [],\n        data: []\n      } : _objectSpread({}, chartData);\n\n      if (chartData.data.length >= 5) {\n        newChart.data.shift();\n        newChart.labels.shift();\n      }\n\n      newChart.data.push(Number(chartType === 0 ? env[0].envdata.temp : env[0].envdata.humidity));\n      newChart.labels.push(env[0].uptime.hours + ':' + env[0].uptime.minutes + ':' + env[0].uptime.seconds);\n      setChartData(newChart);\n    }\n  }, [env]);\n  useEffect(function () {\n    var blankChart = {\n      labels: [],\n      data: []\n    };\n    setChartData(blankChart);\n  }, [chartType]);\n  return _jsx(ImageBackground, {\n    source: bgImage,\n    style: style.bgImage,\n    children: _jsxs(View, {\n      style: style.container,\n      children: [_jsx(StatusBar, {\n        animated: true,\n        backgroundColor: colors0.blued,\n        hidden: false\n      }), _jsx(TopBar, {\n        aboutButton: function aboutButton() {\n          return setModalVisible(true);\n        }\n      }), _jsx(ShowCards, {\n        env: env\n      }), _jsx(EnvChart, {\n        chartData: chartData,\n        chartType: chartType\n      }), _jsx(ChartToggle, {\n        chartType: chartType,\n        setChartType: setChartType\n      }), _jsx(URLField, {\n        URL: URL,\n        setURL: setURL\n      }), _jsx(AboutModal, {\n        visible: visible,\n        setModalVisible: setModalVisible,\n        envBackend: env[0] !== undefined ? env[0].backend : {\n          name: 'unknown',\n          version: 'unknown'\n        }\n      }), _jsx(ConnectText, {\n        env: env\n      })]\n    })\n  });\n};\n\nvar App = function App() {\n  if (utils.isWeb()) {\n    return _jsx(ImageBackground, {\n      source: bgImage,\n      style: style.bgImage,\n      blurRadius: 10,\n      children: _jsx(View, {\n        style: style.webWrapper,\n        children: _jsx(WebEnv, {})\n      })\n    });\n  } else {\n    return _jsx(WebEnv, {});\n  }\n};\n\nexport default App;","map":{"version":3,"sources":["/home/syed/Code/envmon-web/WebEnv/App.js"],"names":["useState","useEffect","TopBar","AboutModal","Cards","CircularLoading","ConnectText","EnvChart","ChartToggle","URLField","colors0","colors1","utils","envmon","bgImage","style","StyleSheet","create","container","flex","webWrapper","height","width","alignSelf","ShowCards","env","length","undefined","envdata","temp","humidity","WebEnv","visible","setModalVisible","chartType","setChartType","setEnv","labels","data","chartData","setChartData","URL","setURL","console","log","init","setTimeout","getAll","then","isNaN","newChart","shift","push","Number","uptime","hours","minutes","seconds","blankChart","blued","backend","name","version","App","isWeb"],"mappings":"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","sourcesContent":["import { useState, useEffect } from 'react';\nimport { View, StatusBar, ImageBackground } from 'react-native';\nimport { StyleSheet } from 'react-native';\n\nimport TopBar from './components/TopBar';\nimport AboutModal from './components/AboutModal';\nimport Cards from './components/Cards';\nimport CircularLoading from './components/CircularLoading';\nimport ConnectText from './components/ConnectText';\nimport EnvChart from './components/EnvChart';\nimport ChartToggle from './components/ChartToggle';\nimport URLField from './components/URLBar';\nimport { colors0, colors1 } from './components/ComponentStyles';\n\nimport utils from './services/WEUtils';\nimport envmon from './services/envmon';\n\nimport bgImage from './assets/background.jpg';\n\nconst style = StyleSheet.create({\n  container: {\n    flex: 1\n  },\n  webWrapper: {\n    flex: 1,\n    height: 720,\n    width: 480,\n    alignSelf: 'center'\n  },\n  bgImage: {\n    flex: 1\n  }\n});\n\nconst ShowCards = ({ env }) => {\n  if (env.length === 0 || env === undefined) {\n    return (\n      <CircularLoading />\n    );\n  } else {\n    return (\n      <Cards temperature={env[0].envdata.temp}\n        humidity={env[0].envdata.humidity} />\n    );\n  }\n}\n\nconst WebEnv = () => {\n  const [visible, setModalVisible] = useState(false);\n  const [chartType, setChartType] = useState(0);\n  const [env, setEnv] = useState([]);\n  const [chartData, setChartData] = useState({ labels: [-1], data: [0.0] });\n  const [URL, setURL] = useState('http://envmon.local:8888/');\n\n  console.log(URL);\n\n  useEffect(() => { utils.init(setURL) }, [])\n\n  useEffect(() => {\n    setTimeout(() => {\n      envmon\n        .getAll(URL)\n        .then(data => setEnv(data));\n    }, 2000);\n  }, [env]);\n\n  useEffect(() => {\n    setEnv([]);\n  }, [URL]);\n\n  useEffect(() => {\n    if (env.length !== 0 && env !== undefined\n      && !(isNaN(env[0].envdata.temp) || isNaN(env[0].envdata.humidity))) {\n      let newChart = chartData.labels[0] === -1 ? { labels: [], data: [] } : { ...chartData };\n      if (chartData.data.length >= 5) {\n        newChart.data.shift();\n        newChart.labels.shift();\n      }\n      newChart.data.push(Number(chartType === 0 ? env[0].envdata.temp : env[0].envdata.humidity));\n      newChart.labels.push(\n        env[0].uptime.hours + ':' + env[0].uptime.minutes + ':' + env[0].uptime.seconds);\n      setChartData(newChart);\n    }\n  }, [env]);\n\n  useEffect(() => {\n    const blankChart = { labels: [], data: [] };\n    setChartData(blankChart);\n  }, [chartType]);\n\n  return (\n    <ImageBackground source={bgImage}\n      style={style.bgImage}>\n      <View style={style.container}>\n        <StatusBar\n          animated={true}\n          backgroundColor={colors0.blued}\n          hidden={false} />\n        <TopBar aboutButton={() => setModalVisible(true)} />\n        <ShowCards env={env} />\n        <EnvChart chartData={chartData} chartType={chartType} />\n        <ChartToggle chartType={chartType} setChartType={setChartType} />\n        <URLField URL={URL} setURL={setURL} />\n        <AboutModal visible={visible} setModalVisible={setModalVisible}\n          envBackend={env[0] !== undefined ? env[0].backend : { name: 'unknown', version: 'unknown' }} />\n        <ConnectText env={env} />\n      </View>\n    </ImageBackground>\n  );\n};\n\nconst App = () => {\n  if (utils.isWeb()) {\n    return (\n      <ImageBackground source={bgImage}\n        style={style.bgImage}\n        blurRadius={10}>\n        <View style={style.webWrapper}>\n          <WebEnv />\n        </View>\n      </ImageBackground >\n    );\n  } else {\n    return (<WebEnv />);\n  }\n};\n\nexport default App;"]},"metadata":{},"sourceType":"module"}