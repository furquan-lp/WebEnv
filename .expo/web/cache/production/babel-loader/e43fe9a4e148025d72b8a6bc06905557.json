{"ast":null,"code":"import _defineProperty from\"@babel/runtime/helpers/defineProperty\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;})),keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}return target;}var __extends=this&&this.__extends||function(){var _extendStatics=function extendStatics(d,b){_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b;}||function(d,b){for(var p in b){if(b.hasOwnProperty(p))d[p]=b[p];}};return _extendStatics(d,b);};return function(d,b){_extendStatics(d,b);function __(){this.constructor=d;}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __());};}();var __assign=this&&this.__assign||function(){__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s){if(Object.prototype.hasOwnProperty.call(s,p))t[p]=s[p];}}return t;};return __assign.apply(this,arguments);};import Pie from\"paths-js/pie\";import React from\"react\";import View from\"react-native-web/dist/exports/View\";import{G,Path,Rect,Svg,Text}from\"react-native-svg\";import AbstractChart from\"./AbstractChart\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ProgressChart=function(_super){__extends(ProgressChart,_super);function ProgressChart(){return _super!==null&&_super.apply(this,arguments)||this;}ProgressChart.prototype.render=function(){var _this=this;var _a=this.props,width=_a.width,height=_a.height,style=_a.style,data=_a.data,hideLegend=_a.hideLegend,strokeWidth=_a.strokeWidth,radius=_a.radius;var _b=style.borderRadius,borderRadius=_b===void 0?0:_b,_c=style.margin,margin=_c===void 0?0:_c,_d=style.marginRight,marginRight=_d===void 0?0:_d;if(Array.isArray(data)){data={data:data};}var pies=data.data.map(function(pieData,i){var r=(height/2-32)/(Array.isArray(data)?data.length:data.data.length)*i+radius;return Pie({r:r,R:r,center:[0,0],data:[pieData,1-pieData],accessor:function accessor(x){return x;}});});var pieBackgrounds=data.data.map(function(pieData,i){var r=(height/2-32)/(Array.isArray(data)?data.length:data.data.length)*i+radius;return Pie({r:r,R:r,center:[0,0],data:[0.999,0.001],accessor:function accessor(x){return x;}});});var withLabel=function withLabel(i){return data.labels&&data.labels[i];};var withColor=function withColor(i){return data.colors&&data.colors[i];};var legend=!hideLegend&&_jsxs(_Fragment,{children:[_jsx(G,{children:pies.map(function(_,i){return _jsx(Rect,{width:\"16px\",height:\"16px\",fill:_this.props.withCustomBarColorFromData?withColor(i):_this.props.chartConfig.color(0.2*(i+1),i),rx:8,ry:8,x:_this.props.width/2.5-24,y:-(_this.props.height/2.5)+_this.props.height*0.8/(Array.isArray(data)?data.length:data.data.length)*i+12},Math.random());})}),_jsx(G,{children:pies.map(function(_,i){return _jsx(Text,_objectSpread(_objectSpread({x:_this.props.width/2.5,y:-(_this.props.height/2.5)+_this.props.height*0.8/(Array.isArray(data)?data.length:data.data.length)*i+12*2},_this.getPropsForLabels()),{},{children:withLabel(i)?data.labels[i]+\" \"+Math.round(100*data.data[i])+\"%\":Math.round(100*data.data[i])+\"%\"}),Math.random());})})]});return _jsx(View,{style:__assign({width:width,height:height,padding:0},style),children:_jsxs(Svg,{width:width-margin*2-marginRight,height:height,children:[this.renderDefs(__assign({width:this.props.height,height:this.props.height},this.props.chartConfig)),_jsx(Rect,{width:\"100%\",height:this.props.height,rx:borderRadius,ry:borderRadius,fill:\"url(#backgroundGradient)\"}),_jsxs(G,{x:this.props.width/(hideLegend?2:2.5),y:this.props.height/2,children:[_jsx(G,{children:pieBackgrounds.map(function(pie,i){return _jsx(Path,{d:pie.curves[0].sector.path.print(),strokeWidth:strokeWidth,stroke:_this.props.chartConfig.color(0.2,i)},Math.random());})}),_jsx(G,{children:pies.map(function(pie,i){return _jsx(Path,{strokeLinecap:\"round\",strokeLinejoin:\"round\",d:pie.curves[0].sector.path.print(),strokeWidth:strokeWidth,stroke:_this.props.withCustomBarColorFromData?withColor(i):_this.props.chartConfig.color(i/pies.length*0.5+0.5,i)},Math.random());})}),legend]})]})});};ProgressChart.defaultProps={style:{},strokeWidth:16,radius:32};return ProgressChart;}(AbstractChart);export default ProgressChart;","map":{"version":3,"sources":["../src/ProgressChart.tsx"],"names":[],"mappings":"2gDAAA,MAAO,CAAA,GAAP,KAAgB,cAAhB,CACA,MAAO,CAAA,KAAP,KAAkB,OAAlB,C,qDAEA,OAAS,CAAT,CAAY,IAAZ,CAAkB,IAAlB,CAAwB,GAAxB,CAA6B,IAA7B,KAAyC,kBAAzC,CAEA,MAAO,CAAA,aAAP,uB,6IA0BA,GAAA,CAAA,aAAA,CAAA,SAAA,MAAA,CAAA,CAA4B,SAAA,CAAA,aAAA,CAAA,MAAA,CAAA,CAA5B,QAAA,CAAA,aAAA,EAAA,C,yDA6LC,CAvLC,aAAA,CAAA,SAAA,CAAA,MAAA,CAAA,UAAA,CAAA,GAAA,CAAA,KAAA,CAAA,IAAA,CACM,GAAA,CAAA,EAAA,CAQA,KAAK,KARL,CACF,KAAK,CAAA,EAAA,CAAA,KADH,CAEF,MAAM,CAAA,EAAA,CAAA,MAFJ,CAGF,KAAK,CAAA,EAAA,CAAA,KAHH,CAIF,IAAI,CAAA,EAAA,CAAA,IAJF,CAKF,UAAU,CAAA,EAAA,CAAA,UALR,CAMF,WAAW,CAAA,EAAA,CAAA,WANT,CAOF,MAAM,CAAA,EAAA,CAAA,MAPJ,CAUI,GAAA,CAAA,EAAA,CAAkD,KAAK,CAAvC,YAAhB,CAAA,YAAY,CAAA,EAAA,GAAA,IAAA,EAAA,CAAG,CAAH,CAAI,EAAhB,CAAkB,EAAA,CAAgC,KAAK,CAA3B,MAA5B,CAAkB,MAAM,CAAA,EAAA,GAAA,IAAA,EAAA,CAAG,CAAH,CAAI,EAA5B,CAA8B,EAAA,CAAoB,KAAK,CAAV,WAA7C,CAA8B,WAAW,CAAA,EAAA,GAAA,IAAA,EAAA,CAAG,CAAH,CAAI,EAA7C,CAER,GAAI,KAAK,CAAC,OAAN,CAAc,IAAd,CAAJ,CAAyB,CACvB,IAAI,CAAG,CACL,IAAI,CAAA,IADC,CAAP,CAGD,CAED,GAAM,CAAA,IAAI,CAAG,IAAI,CAAC,IAAL,CAAU,GAAV,CAAc,SAAC,OAAD,CAAU,CAAV,CAAW,CACpC,GAAM,CAAA,CAAC,CACJ,CAAC,MAAM,CAAG,CAAT,CAAa,EAAd,GACE,KAAK,CAAC,OAAN,CAAc,IAAd,EAAsB,IAAI,CAAC,MAA3B,CAAoC,IAAI,CAAC,IAAL,CAAU,MADhD,CAAD,CAEE,CAFF,CAGA,MAJF,CAMA,MAAO,CAAA,GAAG,CAAC,CACT,CAAC,CAAA,CADQ,CAET,CAAC,CAAE,CAFM,CAGT,MAAM,CAAE,CAAC,CAAD,CAAI,CAAJ,CAHC,CAIT,IAAI,CAAE,CAAC,OAAD,CAAU,EAAI,OAAd,CAJG,CAKT,QAAQ,CAAR,kBAAS,CAAT,CAAkB,CAChB,MAAO,CAAA,CAAP,CACD,CAPQ,CAAD,CAAV,CASD,CAhBY,CAAb,CAkBA,GAAM,CAAA,cAAc,CAAG,IAAI,CAAC,IAAL,CAAU,GAAV,CAAc,SAAC,OAAD,CAAU,CAAV,CAAW,CAC9C,GAAM,CAAA,CAAC,CACJ,CAAC,MAAM,CAAG,CAAT,CAAa,EAAd,GACE,KAAK,CAAC,OAAN,CAAc,IAAd,EAAsB,IAAI,CAAC,MAA3B,CAAoC,IAAI,CAAC,IAAL,CAAU,MADhD,CAAD,CAEE,CAFF,CAGA,MAJF,CAKA,MAAO,CAAA,GAAG,CAAC,CACT,CAAC,CAAA,CADQ,CAET,CAAC,CAAE,CAFM,CAGT,MAAM,CAAE,CAAC,CAAD,CAAI,CAAJ,CAHC,CAIT,IAAI,CAAE,CAAC,KAAD,CAAQ,KAAR,CAJG,CAKT,QAAQ,CAAR,kBAAS,CAAT,CAAkB,CAChB,MAAO,CAAA,CAAP,CACD,CAPQ,CAAD,CAAV,CASD,CAfsB,CAAvB,CAiBA,GAAM,CAAA,SAAS,CAAG,QAAZ,CAAA,SAAY,CAAC,CAAD,CAAU,CAC1B,MAAC,CAAA,IAAY,CAAC,MAAb,EAAwB,IAAY,CAAC,MAAb,CAAoB,CAApB,CAAzB,CAA+C,CADjD,CAGA,GAAM,CAAA,SAAS,CAAG,QAAZ,CAAA,SAAY,CAAC,CAAD,CAAU,CAC1B,MAAC,CAAA,IAAY,CAAC,MAAb,EAAwB,IAAY,CAAC,MAAb,CAAoB,CAApB,CAAzB,CAA+C,CADjD,CAGA,GAAM,CAAA,MAAM,CAAG,CAAC,UAAD,EACb,2BACE,KAAC,CAAD,WACG,IAAI,CAAC,GAAL,CAAS,SAAC,CAAD,CAAI,CAAJ,CAAK,CACb,MACE,MAAC,IAAD,EAEE,KAAK,CAAC,MAFR,CAGE,MAAM,CAAC,MAHT,CAIE,IAAI,CACF,KAAI,CAAC,KAAL,CAAW,0BAAX,CACI,SAAS,CAAC,CAAD,CADb,CAEI,KAAI,CAAC,KAAL,CAAW,WAAX,CAAuB,KAAvB,CAA6B,KAAO,CAAC,CAAG,CAAX,CAA7B,CAA4C,CAA5C,CAPR,CASE,EAAE,CAAE,CATN,CAUE,EAAE,CAAE,CAVN,CAWE,CAAC,CAAE,KAAI,CAAC,KAAL,CAAW,KAAX,CAAmB,GAAnB,CAAyB,EAX9B,CAYE,CAAC,CACC,EAAE,KAAI,CAAC,KAAL,CAAW,MAAX,CAAoB,GAAtB,EACE,KAAI,CAAC,KAAL,CAAW,MAAX,CAAoB,GAArB,EACE,KAAK,CAAC,OAAN,CAAc,IAAd,EAAsB,IAAI,CAAC,MAA3B,CAAoC,IAAI,CAAC,IAAL,CAAU,MADhD,CAAD,CAEE,CAHF,CAIA,EAjBJ,EACO,IAAI,CAAC,MAAL,EADP,CADF,CAsBD,CAvBA,CADH,EADF,CA2BE,KAAC,CAAD,WACG,IAAI,CAAC,GAAL,CAAS,SAAC,CAAD,CAAI,CAAJ,CAAK,CACb,MACE,MAAC,IAAD,8BAEE,CAAC,CAAE,KAAI,CAAC,KAAL,CAAW,KAAX,CAAmB,GAFxB,CAGE,CAAC,CACC,EAAE,KAAI,CAAC,KAAL,CAAW,MAAX,CAAoB,GAAtB,EACE,KAAI,CAAC,KAAL,CAAW,MAAX,CAAoB,GAArB,EACE,KAAK,CAAC,OAAN,CAAc,IAAd,EAAsB,IAAI,CAAC,MAA3B,CAAoC,IAAI,CAAC,IAAL,CAAU,MADhD,CAAD,CAEE,CAHF,CAIA,GAAK,CART,EAUM,KAAI,CAAC,iBAAL,EAVN,eAYG,SAAS,CAAC,CAAD,CAAT,CACO,IAAY,CAAC,MAAb,CAAoB,CAApB,EAAsB,GAAtB,CAA0B,IAAI,CAAC,KAAL,CAC5B,IAAO,IAAY,CAAC,IAAb,CAAkB,CAAlB,CADqB,CAA1B,CAEH,GAHJ,CAIM,IAAI,CAAC,KAAL,CAAW,IAAO,IAAY,CAAC,IAAb,CAAkB,CAAlB,CAAlB,EAAuC,GAhBhD,GACO,IAAI,CAAC,MAAL,EADP,CADF,CAoBD,CArBA,CADH,EA3BF,GADF,CAuDA,MACE,MAAC,IAAD,EACE,KAAK,CAAC,QAAA,CAAA,CACJ,KAAK,CAAA,KADD,CAEJ,MAAM,CAAA,MAFF,CAGJ,OAAO,CAAE,CAHL,CAAA,CAID,KAJC,CADR,UAQE,MAAC,GAAD,EACE,KAAK,CAAE,KAAK,CAAI,MAAiB,CAAG,CAA7B,CAAkC,WAD3C,CAEE,MAAM,CAAE,MAFV,WAIG,KAAK,UAAL,CAAe,QAAA,CAAA,CACd,KAAK,CAAE,KAAK,KAAL,CAAW,MADJ,CAEd,MAAM,CAAE,KAAK,KAAL,CAAW,MAFL,CAAA,CAGX,KAAK,KAAL,CAAW,WAHA,CAAf,CAJH,CASE,KAAC,IAAD,EACE,KAAK,CAAC,MADR,CAEE,MAAM,CAAE,KAAK,KAAL,CAAW,MAFrB,CAGE,EAAE,CAAE,YAHN,CAIE,EAAE,CAAE,YAJN,CAKE,IAAI,CAAC,0BALP,EATF,CAgBE,MAAC,CAAD,EACE,CAAC,CAAE,KAAK,KAAL,CAAW,KAAX,EAAoB,UAAU,CAAG,CAAH,CAAO,GAArC,CADL,CAEE,CAAC,CAAE,KAAK,KAAL,CAAW,MAAX,CAAoB,CAFzB,WAIE,KAAC,CAAD,WACG,cAAc,CAAC,GAAf,CAAmB,SAAC,GAAD,CAAM,CAAN,CAAO,CACzB,MACE,MAAC,IAAD,EAEE,CAAC,CAAE,GAAG,CAAC,MAAJ,CAAW,CAAX,EAAc,MAAd,CAAqB,IAArB,CAA0B,KAA1B,EAFL,CAGE,WAAW,CAAE,WAHf,CAIE,MAAM,CAAE,KAAI,CAAC,KAAL,CAAW,WAAX,CAAuB,KAAvB,CAA6B,GAA7B,CAAkC,CAAlC,CAJV,EACO,IAAI,CAAC,MAAL,EADP,CADF,CAQD,CATA,CADH,EAJF,CAgBE,KAAC,CAAD,WACG,IAAI,CAAC,GAAL,CAAS,SAAC,GAAD,CAAM,CAAN,CAAO,CACf,MACE,MAAC,IAAD,EAEE,aAAa,CAAC,OAFhB,CAGE,cAAc,CAAC,OAHjB,CAIE,CAAC,CAAE,GAAG,CAAC,MAAJ,CAAW,CAAX,EAAc,MAAd,CAAqB,IAArB,CAA0B,KAA1B,EAJL,CAKE,WAAW,CAAE,WALf,CAME,MAAM,CACJ,KAAI,CAAC,KAAL,CAAW,0BAAX,CACI,SAAS,CAAC,CAAD,CADb,CAEI,KAAI,CAAC,KAAL,CAAW,WAAX,CAAuB,KAAvB,CACG,CAAC,CAAG,IAAI,CAAC,MAAV,CAAoB,GAApB,CAA0B,GAD5B,CAEE,CAFF,CATR,EACO,IAAI,CAAC,MAAL,EADP,CADF,CAiBD,CAlBA,CADH,EAhBF,CAqCG,MArCH,GAhBF,GARF,EADF,CAmED,CAtLD,CAFc,aAAA,CAAA,YAAA,CAAe,CAAE,KAAK,CAAE,EAAT,CAAa,WAAW,CAAE,EAA1B,CAA8B,MAAM,CAAE,EAAtC,CAAf,CAyLhB,MAAA,CAAA,aAAA,CAAC,CA7LD,CAA4B,aAA5B,CAAA,CA+LA,cAAe,CAAA,aAAf","sourcesContent":["import Pie from \"paths-js/pie\";\nimport React from \"react\";\nimport { View, ViewStyle } from \"react-native\";\nimport { G, Path, Rect, Svg, Text } from \"react-native-svg\";\n\nimport AbstractChart, {\n  AbstractChartConfig,\n  AbstractChartProps\n} from \"./AbstractChart\";\n\nexport type ProgressChartData =\n  | Array<number>\n  | { labels?: Array<string>; colors?: Array<string>; data: Array<number> };\n\nexport interface ProgressChartProps extends AbstractChartProps {\n  data: ProgressChartData;\n  width: number;\n  height: number;\n  center?: Array<number>;\n  absolute?: boolean;\n  hasLegend?: boolean;\n  style?: Partial<ViewStyle>;\n  chartConfig?: AbstractChartConfig;\n  hideLegend?: boolean;\n  strokeWidth?: number;\n  radius?: number;\n  withCustomBarColorFromData?: boolean;\n}\n\ntype ProgressChartState = {};\n\nclass ProgressChart extends AbstractChart<\n  ProgressChartProps,\n  ProgressChartState\n> {\n  public static defaultProps = { style: {}, strokeWidth: 16, radius: 32 };\n\n  render() {\n    let {\n      width,\n      height,\n      style,\n      data,\n      hideLegend,\n      strokeWidth,\n      radius\n    } = this.props;\n\n    const { borderRadius = 0, margin = 0, marginRight = 0 } = style;\n\n    if (Array.isArray(data)) {\n      data = {\n        data\n      };\n    }\n\n    const pies = data.data.map((pieData, i) => {\n      const r =\n        ((height / 2 - 32) /\n          (Array.isArray(data) ? data.length : data.data.length)) *\n          i +\n        radius;\n\n      return Pie({\n        r,\n        R: r,\n        center: [0, 0],\n        data: [pieData, 1 - pieData],\n        accessor(x: string) {\n          return x;\n        }\n      });\n    });\n\n    const pieBackgrounds = data.data.map((pieData, i) => {\n      const r =\n        ((height / 2 - 32) /\n          (Array.isArray(data) ? data.length : data.data.length)) *\n          i +\n        radius;\n      return Pie({\n        r,\n        R: r,\n        center: [0, 0],\n        data: [0.999, 0.001],\n        accessor(x: string) {\n          return x;\n        }\n      });\n    });\n\n    const withLabel = (i: number) =>\n      (data as any).labels && (data as any).labels[i];\n\n    const withColor = (i: number) =>\n      (data as any).colors && (data as any).colors[i];\n\n    const legend = !hideLegend && (\n      <>\n        <G>\n          {pies.map((_, i) => {\n            return (\n              <Rect\n                key={Math.random()}\n                width=\"16px\"\n                height=\"16px\"\n                fill={\n                  this.props.withCustomBarColorFromData\n                    ? withColor(i)\n                    : this.props.chartConfig.color(0.2 * (i + 1), i)\n                }\n                rx={8}\n                ry={8}\n                x={this.props.width / 2.5 - 24}\n                y={\n                  -(this.props.height / 2.5) +\n                  ((this.props.height * 0.8) /\n                    (Array.isArray(data) ? data.length : data.data.length)) *\n                    i +\n                  12\n                }\n              />\n            );\n          })}\n        </G>\n        <G>\n          {pies.map((_, i) => {\n            return (\n              <Text\n                key={Math.random()}\n                x={this.props.width / 2.5}\n                y={\n                  -(this.props.height / 2.5) +\n                  ((this.props.height * 0.8) /\n                    (Array.isArray(data) ? data.length : data.data.length)) *\n                    i +\n                  12 * 2\n                }\n                {...this.getPropsForLabels()}\n              >\n                {withLabel(i)\n                  ? `${(data as any).labels[i]} ${Math.round(\n                      100 * (data as any).data[i]\n                    )}%`\n                  : `${Math.round(100 * (data as any).data[i])}%`}\n              </Text>\n            );\n          })}\n        </G>\n      </>\n    );\n\n    return (\n      <View\n        style={{\n          width,\n          height,\n          padding: 0,\n          ...style\n        }}\n      >\n        <Svg\n          width={width - (margin as number) * 2 - (marginRight as number)}\n          height={height}\n        >\n          {this.renderDefs({\n            width: this.props.height,\n            height: this.props.height,\n            ...this.props.chartConfig\n          })}\n          <Rect\n            width=\"100%\"\n            height={this.props.height}\n            rx={borderRadius}\n            ry={borderRadius}\n            fill=\"url(#backgroundGradient)\"\n          />\n          <G\n            x={this.props.width / (hideLegend ? 2 : 2.5)}\n            y={this.props.height / 2}\n          >\n            <G>\n              {pieBackgrounds.map((pie, i) => {\n                return (\n                  <Path\n                    key={Math.random()}\n                    d={pie.curves[0].sector.path.print()}\n                    strokeWidth={strokeWidth}\n                    stroke={this.props.chartConfig.color(0.2, i)}\n                  />\n                );\n              })}\n            </G>\n            <G>\n              {pies.map((pie, i) => {\n                return (\n                  <Path\n                    key={Math.random()}\n                    strokeLinecap=\"round\"\n                    strokeLinejoin=\"round\"\n                    d={pie.curves[0].sector.path.print()}\n                    strokeWidth={strokeWidth}\n                    stroke={\n                      this.props.withCustomBarColorFromData\n                        ? withColor(i)\n                        : this.props.chartConfig.color(\n                            (i / pies.length) * 0.5 + 0.5,\n                            i\n                          )\n                    }\n                  />\n                );\n              })}\n            </G>\n            {legend}\n          </G>\n        </Svg>\n      </View>\n    );\n  }\n}\n\nexport default ProgressChart;\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}