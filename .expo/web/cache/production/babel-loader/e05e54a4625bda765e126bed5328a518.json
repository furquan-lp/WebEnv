{"ast":null,"code":"import _defineProperty from\"@babel/runtime/helpers/defineProperty\";import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;})),keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}return target;}import{useState,useEffect}from'react';import View from\"react-native-web/dist/exports/View\";import StatusBar from\"react-native-web/dist/exports/StatusBar\";import ImageBackground from\"react-native-web/dist/exports/ImageBackground\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import TopBar from\"./components/TopBar\";import AboutModal from\"./components/AboutModal\";import Cards from\"./components/Cards\";import CircularLoading from\"./components/CircularLoading\";import ConnectText from\"./components/ConnectText\";import EnvChart from\"./components/EnvChart\";import ChartToggle from\"./components/ChartToggle\";import URLField from\"./components/URLBar\";import{colors0,colors1}from\"./components/ComponentStyles\";import utils from\"./services/WEUtils\";import envmon from\"./services/envmon\";import bgImage from\"./assets/background.jpg\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var style=StyleSheet.create({container:{flex:1},webWrapper:{flex:1,height:720,width:480,alignSelf:'center'},bgImage:{flex:1}});var ShowCards=function ShowCards(_ref){var env=_ref.env;if(env.length===0||env===undefined){return _jsx(CircularLoading,{});}else{return _jsx(Cards,{temperature:env[0].envdata.temp,humidity:env[0].envdata.humidity});}};var WebEnv=function WebEnv(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),visible=_useState2[0],setModalVisible=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),chartType=_useState4[0],setChartType=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),env=_useState6[0],setEnv=_useState6[1];var _useState7=useState({labels:[-1],data:[0.0]}),_useState8=_slicedToArray(_useState7,2),chartData=_useState8[0],setChartData=_useState8[1];var _useState9=useState('http://4.tcp.ngrok.io:17657'),_useState10=_slicedToArray(_useState9,2),URL=_useState10[0],setURL=_useState10[1];useEffect(function(){setTimeout(function(){envmon.getAll(URL).then(function(data){return setEnv(data);});},2000);},[URL,env]);useEffect(function(){if(env.length!==0&&env!==undefined&&!(isNaN(env[0].envdata.temp)||isNaN(env[0].envdata.humidity))){var newChart=chartData.labels[0]===-1?{labels:[],data:[]}:_objectSpread({},chartData);if(chartData.data.length>=5){newChart.data.shift();newChart.labels.shift();}newChart.data.push(Number(chartType===0?env[0].envdata.temp:env[0].envdata.humidity));newChart.labels.push(env[0].uptime.hours+':'+env[0].uptime.minutes+':'+env[0].uptime.seconds);setChartData(newChart);}},[env]);useEffect(function(){var blankChart={labels:[],data:[]};setChartData(blankChart);},[chartType]);return _jsx(ImageBackground,{source:bgImage,style:style.bgImage,children:_jsxs(View,{style:style.container,children:[_jsx(StatusBar,{animated:true,backgroundColor:colors0.blued,hidden:false}),_jsx(TopBar,{aboutButton:function aboutButton(){return setModalVisible(true);}}),_jsx(ShowCards,{env:env}),_jsx(EnvChart,{chartData:chartData,chartType:chartType}),_jsx(ChartToggle,{chartType:chartType,setChartType:setChartType}),_jsx(URLField,{URL:URL,setURL:setURL}),_jsx(AboutModal,{visible:visible,setModalVisible:setModalVisible,envBackend:env[0]!==undefined?env[0].backend:{name:'unknown',version:'unknown'}}),_jsx(ConnectText,{env:env})]})});};var App=function App(){if(utils.isWeb()){return _jsx(ImageBackground,{source:bgImage,style:style.bgImage,blurRadius:10,children:_jsx(View,{style:style.webWrapper,children:_jsx(WebEnv,{})})});}else{return _jsx(WebEnv,{});}};export default App;","map":{"version":3,"sources":["/home/syed/Code/envmon-web/WebEnv/App.js"],"names":["useState","useEffect","TopBar","AboutModal","Cards","CircularLoading","ConnectText","EnvChart","ChartToggle","URLField","colors0","colors1","utils","envmon","bgImage","style","StyleSheet","create","container","flex","webWrapper","height","width","alignSelf","ShowCards","env","length","undefined","envdata","temp","humidity","WebEnv","visible","setModalVisible","chartType","setChartType","setEnv","labels","data","chartData","setChartData","URL","setURL","setTimeout","getAll","then","isNaN","newChart","shift","push","Number","uptime","hours","minutes","seconds","blankChart","blued","backend","name","version","App","isWeb"],"mappings":"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","sourcesContent":["import { useState, useEffect } from 'react';\nimport { View, StatusBar, ImageBackground } from 'react-native';\nimport { StyleSheet } from 'react-native';\n\nimport TopBar from './components/TopBar';\nimport AboutModal from './components/AboutModal';\nimport Cards from './components/Cards';\nimport CircularLoading from './components/CircularLoading';\nimport ConnectText from './components/ConnectText';\nimport EnvChart from './components/EnvChart';\nimport ChartToggle from './components/ChartToggle';\nimport URLField from './components/URLBar';\nimport { colors0, colors1 } from './components/ComponentStyles';\n\nimport utils from './services/WEUtils';\nimport envmon from './services/envmon';\n\nimport bgImage from './assets/background.jpg';\n\nconst style = StyleSheet.create({\n  container: {\n    flex: 1\n  },\n  webWrapper: {\n    flex: 1,\n    height: 720,\n    width: 480,\n    alignSelf: 'center'\n  },\n  bgImage: {\n    flex: 1\n  }\n});\n\nconst ShowCards = ({ env }) => {\n  if (env.length === 0 || env === undefined) {\n    return (\n      <CircularLoading />\n    );\n  } else {\n    return (\n      <Cards temperature={env[0].envdata.temp}\n        humidity={env[0].envdata.humidity} />\n    );\n  }\n}\n\nconst WebEnv = () => {\n  const [visible, setModalVisible] = useState(false);\n  const [chartType, setChartType] = useState(0);\n  const [env, setEnv] = useState([]);\n  const [chartData, setChartData] = useState({ labels: [-1], data: [0.0] });\n  const [URL, setURL] = useState('http://4.tcp.ngrok.io:17657');\n\n  useEffect(() => {\n    setTimeout(() => {\n      envmon\n        .getAll(URL)\n        .then(data => setEnv(data));\n    }, 2000);\n  }, [URL, env]);\n\n  useEffect(() => {\n    if (env.length !== 0 && env !== undefined\n      && !(isNaN(env[0].envdata.temp) || isNaN(env[0].envdata.humidity))) {\n      let newChart = chartData.labels[0] === -1 ? { labels: [], data: [] } : { ...chartData };\n      if (chartData.data.length >= 5) {\n        newChart.data.shift();\n        newChart.labels.shift();\n      }\n      newChart.data.push(Number(chartType === 0 ? env[0].envdata.temp : env[0].envdata.humidity));\n      newChart.labels.push(\n        env[0].uptime.hours + ':' + env[0].uptime.minutes + ':' + env[0].uptime.seconds);\n      setChartData(newChart);\n    }\n  }, [env]);\n\n  useEffect(() => {\n    const blankChart = { labels: [], data: [] };\n    setChartData(blankChart);\n  }, [chartType]);\n\n  return (\n    <ImageBackground source={bgImage}\n      style={style.bgImage}>\n      <View style={style.container}>\n        <StatusBar\n          animated={true}\n          backgroundColor={colors0.blued}\n          hidden={false} />\n        <TopBar aboutButton={() => setModalVisible(true)} />\n        <ShowCards env={env} />\n        <EnvChart chartData={chartData} chartType={chartType} />\n        <ChartToggle chartType={chartType} setChartType={setChartType} />\n        <URLField URL={URL} setURL={setURL} />\n        <AboutModal visible={visible} setModalVisible={setModalVisible}\n          envBackend={env[0] !== undefined ? env[0].backend : { name: 'unknown', version: 'unknown' }} />\n        <ConnectText env={env} />\n      </View>\n    </ImageBackground>\n  );\n};\n\nconst App = () => {\n  if (utils.isWeb()) {\n    return (\n      <ImageBackground source={bgImage}\n        style={style.bgImage}\n        blurRadius={10}>\n        <View style={style.webWrapper}>\n          <WebEnv />\n        </View>\n      </ImageBackground >\n    );\n  } else {\n    return (<WebEnv />);\n  }\n};\n\nexport default App;"]},"metadata":{},"sourceType":"module"}