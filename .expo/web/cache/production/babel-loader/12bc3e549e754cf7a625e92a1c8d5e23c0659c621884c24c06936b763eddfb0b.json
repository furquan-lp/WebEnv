{"ast":null,"code":"import _defineProperty from\"@babel/runtime/helpers/defineProperty\";import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;})),keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}return target;}import{useState,useEffect}from'react';import View from\"react-native-web/dist/exports/View\";import StatusBar from\"react-native-web/dist/exports/StatusBar\";import ImageBackground from\"react-native-web/dist/exports/ImageBackground\";import TopBar from\"./components/TopBar\";import AboutModal from\"./components/AboutModal\";import Cards from\"./components/Cards\";import CircularLoading from\"./components/CircularLoading\";import ConnectText from\"./components/ConnectText\";import EnvChart from\"./components/EnvChart\";import ChartToggle from\"./components/ChartToggle\";import URLField from\"./components/URLBar\";import{colors0,componentStyles}from\"./components/ComponentStyles\";import utils from\"./services/WEUtils\";import envmon from\"./services/envmon\";import bgImage from\"./assets/background.jpg\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ShowCards=function ShowCards(_ref){var env=_ref.env;if(env===undefined||env.length===0){return _jsx(CircularLoading,{});}else{return _jsx(Cards,{temperature:env[0].envdata.temp,humidity:env[0].envdata.humidity});}};var WebEnv=function WebEnv(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),visible=_useState2[0],setModalVisible=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),chartType=_useState4[0],setChartType=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),env=_useState6[0],setEnv=_useState6[1];var _useState7=useState({labels:[-1],data:[0.0]}),_useState8=_slicedToArray(_useState7,2),chartData=_useState8[0],setChartData=_useState8[1];var _useState9=useState('http://envmon.local:8001/'),_useState10=_slicedToArray(_useState9,2),URL=_useState10[0],setURL=_useState10[1];useEffect(function(){utils.init(setURL);},[]);useEffect(function(){setTimeout(function(){envmon.getAll(URL).then(function(data){return setEnv(data);});},2000);},[env]);useEffect(function(){setEnv([]);},[URL]);useEffect(function(){if(env!==undefined&&env.length!==0&&!(isNaN(env[0].envdata.temp)||isNaN(env[0].envdata.humidity))){var newChart=chartData.labels[0]===-1?{labels:[],data:[]}:_objectSpread({},chartData);if(chartData.data.length>=5){newChart.data.shift();newChart.labels.shift();}newChart.data.push(Number(chartType===0?env[0].envdata.temp:env[0].envdata.humidity));newChart.labels.push(env[0].uptime.hours+':'+env[0].uptime.minutes+':'+env[0].uptime.seconds);setChartData(newChart);}},[env]);useEffect(function(){var blankChart={labels:[],data:[]};setChartData(blankChart);},[chartType]);return _jsx(ImageBackground,{source:bgImage,style:componentStyles.bgImage,children:_jsxs(View,{style:componentStyles.appContainer,children:[_jsx(StatusBar,{animated:true,backgroundColor:colors0.blued,hidden:false}),_jsx(TopBar,{aboutButton:function aboutButton(){return setModalVisible(true);}}),_jsx(ShowCards,{env:env}),_jsx(EnvChart,{chartData:chartData,chartType:chartType}),_jsx(ChartToggle,{chartType:chartType,setChartType:setChartType}),_jsx(URLField,{URL:URL,setURL:setURL}),_jsx(AboutModal,{visible:visible,setModalVisible:setModalVisible,envBackend:env[0]!==undefined?env[0].backend:{name:'unknown',version:'unknown'}}),_jsx(ConnectText,{env:env})]})});};var App=function App(){if(utils.isWeb()&&!utils.isPortrait()){return _jsx(ImageBackground,{source:bgImage,style:componentStyles.bgImage,blurRadius:10,children:_jsx(View,{style:componentStyles.webWrapper,children:_jsx(WebEnv,{})})});}else{return _jsx(WebEnv,{});}};export default App;","map":{"version":3,"names":["useState","useEffect","TopBar","AboutModal","Cards","CircularLoading","ConnectText","EnvChart","ChartToggle","URLField","colors0","componentStyles","utils","envmon","bgImage","ShowCards","env","undefined","length","envdata","temp","humidity","WebEnv","visible","setModalVisible","chartType","setChartType","setEnv","labels","data","chartData","setChartData","URL","setURL","init","setTimeout","getAll","then","isNaN","newChart","shift","push","Number","uptime","hours","minutes","seconds","blankChart","appContainer","blued","backend","name","version","App","isWeb","isPortrait","webWrapper"],"sources":["/home/syed-f/Code/envmon-web/WebEnv/App.js"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { View, StatusBar, ImageBackground } from 'react-native';\n\nimport TopBar from './components/TopBar';\nimport AboutModal from './components/AboutModal';\nimport Cards from './components/Cards';\nimport CircularLoading from './components/CircularLoading';\nimport ConnectText from './components/ConnectText';\nimport EnvChart from './components/EnvChart';\nimport ChartToggle from './components/ChartToggle';\nimport URLField from './components/URLBar';\nimport { colors0, componentStyles } from './components/ComponentStyles';\n\nimport utils from './services/WEUtils';\nimport envmon from './services/envmon';\n\nimport bgImage from './assets/background.jpg';\n\nconst ShowCards = ({ env }) => {\n  if (env === undefined || env.length === 0) {\n    return (\n      <CircularLoading />\n    );\n  } else {\n    return (\n      <Cards temperature={env[0].envdata.temp}\n        humidity={env[0].envdata.humidity} />\n    );\n  }\n}\n\nconst WebEnv = () => {\n  const [visible, setModalVisible] = useState(false);\n  const [chartType, setChartType] = useState(0);\n  const [env, setEnv] = useState([]);\n  const [chartData, setChartData] = useState({ labels: [-1], data: [0.0] });\n  const [URL, setURL] = useState('http://envmon.local:8001/');\n\n  useEffect(() => { utils.init(setURL) }, []);\n\n  useEffect(() => {\n    setTimeout(() => {\n      envmon\n        .getAll(URL)\n        .then(data => setEnv(data));\n    }, 2000);\n  }, [env]);\n\n  useEffect(() => {\n    setEnv([]);\n  }, [URL]);\n\n  useEffect(() => {\n    if (env !== undefined && env.length !== 0\n      && !(isNaN(env[0].envdata.temp) || isNaN(env[0].envdata.humidity))) {\n      let newChart = chartData.labels[0] === -1 ? { labels: [], data: [] } : { ...chartData };\n      if (chartData.data.length >= 5) {\n        newChart.data.shift();\n        newChart.labels.shift();\n      }\n      newChart.data.push(Number(chartType === 0 ? env[0].envdata.temp : env[0].envdata.humidity));\n      newChart.labels.push(\n        env[0].uptime.hours + ':' + env[0].uptime.minutes + ':' + env[0].uptime.seconds);\n      setChartData(newChart);\n    }\n  }, [env]);\n\n  useEffect(() => {\n    const blankChart = { labels: [], data: [] };\n    setChartData(blankChart);\n  }, [chartType]);\n\n  return (\n    <ImageBackground source={bgImage}\n      style={componentStyles.bgImage}>\n      <View style={componentStyles.appContainer}>\n        <StatusBar\n          animated={true}\n          backgroundColor={colors0.blued}\n          hidden={false} />\n        <TopBar aboutButton={() => setModalVisible(true)} />\n        <ShowCards env={env} />\n        <EnvChart chartData={chartData} chartType={chartType} />\n        <ChartToggle chartType={chartType} setChartType={setChartType} />\n        <URLField URL={URL} setURL={setURL} />\n        <AboutModal visible={visible} setModalVisible={setModalVisible}\n          envBackend={env[0] !== undefined ? env[0].backend : { name: 'unknown', version: 'unknown' }} />\n        <ConnectText env={env} />\n      </View>\n    </ImageBackground>\n  );\n};\n\nconst App = () => {\n  if (utils.isWeb() && !utils.isPortrait()) {\n    return (\n      <ImageBackground source={bgImage}\n        style={componentStyles.bgImage}\n        blurRadius={10}>\n        <View style={componentStyles.webWrapper}>\n          <WebEnv />\n        </View>\n      </ImageBackground >\n    );\n  } else {\n    return (<WebEnv />);\n  }\n};\n\nexport default App;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}